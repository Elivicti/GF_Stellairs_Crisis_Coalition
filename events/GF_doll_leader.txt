namespace = GF_doll_leader

country_event = {
	id = GF_doll_leader.0
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		from = {
			species = { has_trait = GF_trait_doll }
			NOT = { has_leader_flag = flag_GF_ogas_leader }
		}
	}

	immediate = {
		from = {
			add_trait = GF_trait_leader_doll
			switch = {
				trigger = leader_class
				admiral = {
					if = {
						limit = { species = { has_trait = GF_trait_tacticalchip } }
						add_trait = GF_trait_leader_admiral_plus
					}
				}
				general = {
					if = {
						limit = { species = { has_trait = GF_trait_tacticalchip } }
						add_trait = GF_trait_leader_general_plus
					}
				}
				scientist = {
					if = {
						limit = { species = { has_trait = GF_trait_logical_subroutine } }
						add_trait = GF_trait_leader_scientist_plus
					}
				}
				governor = {
					if = {
						limit = { species = { has_trait = GF_trait_zener_protocol } }
						add_trait = GF_trait_leader_governor_plus
					}
				}
			}
		}
	}
}

# from = species
country_event = {
	id = GF_doll_leader.1
	hide_window = yes

	is_triggered_only = yes
	trigger = {
		from = { has_trait = GF_trait_tacticalchip }
	}

	immediate = {
		every_owned_leader = {
			limit = {
				is_same_species = from
				NOR = {
					has_trait = GF_trait_leader_admiral_plus
					has_trait = GF_trait_leader_general_plus
				}
			}
			switch = {
				trigger = leader_class
				admiral = { add_trait = GF_trait_leader_admiral_plus }
				general = { add_trait = GF_trait_leader_general_plus }
			}
		}
	}
}

# from = species
country_event = {
	id = GF_doll_leader.2
	hide_window = yes

	is_triggered_only = yes
	trigger = {
		from = { has_trait = GF_trait_zener_protocol }
	}

	immediate = {
		every_owned_leader = {
			limit = {
				is_same_species = from
				leader_class = governor
				NOT = { has_trait = GF_trait_leader_governor_plus }
				NOT = { has_leader_flag = flag_GF_ogas_leader }
			}
			add_trait = GF_trait_leader_governor_plus
		}
	}
}

# from = species
country_event = {
	id = GF_doll_leader.3
	hide_window = yes

	is_triggered_only = yes
	trigger = {
		from = { has_trait = GF_trait_logical_subroutine }
	}

	immediate = {
		every_owned_leader = {
			limit = {
				is_same_species = from
				leader_class = scientist
				NOT = { has_trait = GF_trait_leader_scientist_plus }
			}
			add_trait = GF_trait_leader_scientist_plus
		}
	}
}

country_event = {
	id = GF_doll_leader.100
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		every_owned_leader = {
			limit = { has_trait = GF_trait_leader_doll }

			# remove_trait = leader_trait_armchair_gf_GK_commander	# what is this?

			remove_trait = all_negative
		}
	}
}